{% extends 'base.html' %}
{% block content %}
<div class="d-flex justify-content-between align-items-center">
    <h3>Profile: {{ u.username }}</h3>
    <div class="d-flex gap-2">
        {% if user and user.id == u.id %}
        <a class="btn btn-sm btn-outline-secondary" href="{{ url_for('profile_edit') }}">Edit Profile</a>
        {% endif %}
        {% if user and user.id != u.id %}
        <a class="btn btn-sm btn-primary" href="{{ url_for('message_compose') }}?to={{ u.username }}">Message</a>
        {% endif %}
    </div>
</div>
<p class="text-muted">Member since {{ u.created_at.strftime('%Y-%m-%d') }}</p>
{% if u.bio %}
<div class="card mt-3">
    <div class="card-body">
        <h5 class="card-title">Bio</h5>
        <p class="mb-0" style="white-space: pre-wrap;">{{ u.bio }}</p>
    </div>
</div>
{% endif %}
<h5 class="mt-3">Recent posts</h5>
<ul>
    {% for p in posts %}
    <li><a href="{{ url_for('post_view', post_id=p.id) }}">{{ p.title }}</a> <small class="text-muted">({{
            p.created_at.strftime('%Y-%m-%d %H:%M') }})</small></li>
    {% endfor %}
</ul>
{% endblock %}