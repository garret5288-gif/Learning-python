{% extends 'base.html' %}
{% block title %}Forum - Home{% endblock %}
{% block content %}
<div class="text-center mb-3">
    <h2 class="mb-0">Threads</h2>
    {% if session.get('user_id') %}
    <a class="btn btn-primary mt-2" href="{{ url_for('post_create') }}">Start a Thread</a>
    {% endif %}
</div>
{% if not posts %}
<p class="text-muted">No posts yet. Be the first to start a thread.</p>
{% else %}
<ul class="list-group">
    {% for p in posts %}
    <li class="list-group-item d-flex justify-content-between align-items-start">
        <div class="me-3">
            <a class="fw-semibold text-decoration-none" href="{{ url_for('post_view', post_id=p.id) }}">{{ p.title
                }}</a>
            <div class="text-muted small">by {{ p.author.username }} &middot; {{ p.created_at|dt }} &middot; {{
                p.comment_count }}
                comments {% if p.is_locked %}
                <span class="badge bg-warning text-dark">Locked</span>
                {% endif %}
            </div>
        </div>
        {% if session.get('is_moderator') %}
        <span class="badge bg-secondary align-self-center">Mod</span>
        {% endif %}
    </li>
    {% endfor %}
</ul>
{% endif %}
{% endblock %}