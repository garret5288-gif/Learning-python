{% extends 'base.html' %}
{% block title %}Big Dawgs Blogs - Home{% endblock %}
{% block content %}
<div class="text-center mb-3">
    <h2 class="mb-0">Posts</h2>
    {% if session.get('user_id') %}
    <a class="btn btn-primary mt-2" href="{{ url_for('create') }}">Write a Post</a>
    {% endif %}
</div>
{% if not posts %}
<p>No posts yet. Be the first to <a href="{{ url_for('create') }}">write one</a>.</p>
{% else %}
<ul class="list-group">
    {% for p in posts %}
    <li class="list-group-item">
        <div class="d-flex justify-content-between align-items-start">
            <div class="me-3">
                <a href="{{ url_for('view_post', post_id=p.id) }}" class="fw-semibold text-decoration-none">{{ p.title
                    }}</a>
                <div class="text-muted small">by {{ p.author }} â€¢ {{ p.created_at }}</div>
            </div>
            {% if session.get('username') == p.author %}
            <div class="d-flex gap-2">
                <a class="btn btn-sm btn-outline-secondary" href="{{ url_for('edit', post_id=p.id) }}">Edit</a>
                <form class="inline" method="post" action="{{ url_for('remove', post_id=p.id) }}"
                    onsubmit="return confirm('Delete this post?');">
                    <button class="btn btn-sm btn-outline-danger" type="submit">Delete</button>
                </form>
            </div>
            {% endif %}
        </div>
    </li>
    {% endfor %}
</ul>
{% endif %}
{% endblock %}